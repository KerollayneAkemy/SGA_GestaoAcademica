<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Painel Administrador - SGA</title>
    <link rel="stylesheet" href="css/painel-admin.css" />
    <script src="js/auth.js"></script>
  </head>
  <body>
    <header>
      <div class="logo">SGA</div>
      <nav>
        <a href="home.html">Home</a>
        <a href="cursos.html">Cursos</a>
        <a href="sobre.html">Sobre</a>
        <a href="contato.html">Contato</a>
        <a
          href="#"
          onclick="logout(); window.location.href='login.html';"
          class="btn-login"
          >Sair</a
        >
      </nav>
    </header>

    <main>
      <section class="painel-container">
        <div class="painel-card">
          <h2>Painel do Administrador</h2>
          <p>Cadastre novos cursos e disciplinas na plataforma</p>

          <form class="form-admin">
            <input type="text" placeholder="Nome do Curso" required />
            <input type="text" placeholder="Nome da Disciplina" required />
            <button type="submit">Cadastrar</button>
          </form>
        </div>

        <div class="painel-card tabela-card">
          <h3>Lista de Cursos</h3>
          <table class="tabela-painel">
            <thead>
              <tr>
                <th>Curso</th>
                <th>Disciplina</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Engenharia de Software</td>
                <td>Engenharia de Software I</td>
              </tr>
              <tr>
                <td>Banco de Dados</td>
                <td>Bancos de Dados Avançados</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="painel-card tabela-card">
          <h3>Formulário de Contatos Recebidos</h3>
          <table class="tabela-painel">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Email</th>
                <th>Mensagem</th>
              </tr>
            </thead>
            <tbody id="mensagensTabela">
              <tr>
                <td colspan="3">Nenhuma mensagem recebida</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
    </main>

    <footer>
      <p>
        &copy; 2025 Sistema de Gestão Acadêmica. Todos os direitos reservados.
      </p>
    </footer>

    <script>
      if (!isLoggedIn()) {
        window.location.href = "login.html";
      } else {
        const user = getCurrentUser();
        if (user.type !== "admin") {
          window.location.href = "login.html";
        }
      }

      function carregarMensagens() {
        const mensagens =
          JSON.parse(localStorage.getItem("mensagensContato")) || [];
        const tabela = document.getElementById("mensagensTabela");

        if (mensagens.length === 0) {
          tabela.innerHTML =
            '<tr><td colspan="3">Nenhuma mensagem recebida</td></tr>';
        } else {
          tabela.innerHTML = mensagens
            .map(
              (msg) =>
                `<tr>
                <td>${msg.nome}</td>
                <td>${msg.email}</td>
                <td>${msg.mensagem}</td>
            </tr>`
            )
            .join("");
        }
      }

      carregarMensagens();
    </script>
  </body>
</html>
